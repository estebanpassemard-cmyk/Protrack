// COPIE SAUVEGARDE STRUCTURÉE
        function copyData() {
            // Regroupement par projet
            let groups = db.reduce((acc, o) => {
                (acc[o.p] = acc[o.p] || []).push(o);
                return acc;
            }, {});

            let txt = "EXPORT PROTRACK - " + new Date().toLocaleDateString() + "\n";
            txt += "==============================\n\n";

            for (let proj in groups) {
                txt += `PROJET : ${proj}\n`;
                let totalProj = 0;
                
                groups[proj].forEach(o => {
                    const dateFmt = formatDate(o.d);
                    if (o.hStr === "FORFAIT") {
                        // Pour les forfaits : affiche le type (Pige, OFF, etc)
                        txt += `  [${dateFmt}] ${o.t} : ${o.val.toFixed(2)}€\n`;
                    } else {
                        // Pour la production/trajet : affiche horaires et total heures
                        txt += `  [${dateFmt}] ${o.hStr} (${o.dur.toFixed(2)}h) : ${o.val.toFixed(2)}€\n`;
                    }
                    totalProj += o.val;
                });
                
                txt += `TOTAL ${proj} : ${totalProj.toFixed(2)}€\n`;
                txt += "------------------------------\n\n";
            }

            const el = document.createElement('textarea');
            el.value = txt; 
            document.body.appendChild(el); 
            el.select();
            document.execCommand('copy'); 
            document.body.removeChild(el);
            // Pas d'alerte pour ne pas bloquer l'appli
        }
